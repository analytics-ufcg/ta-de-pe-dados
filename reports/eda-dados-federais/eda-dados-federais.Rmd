---
title: "Exploração dos dados de compras do Governo Federal"
output: 
  html_document:
    css: styles.css
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(
  echo = FALSE,
  warning = FALSE,
  message = FALSE,
  fig.cap = '',
  fig.align = 'center',
  fig.width = 10,
  fig.height = 8
)
```

```{r}
library(tidyverse)
library(here)
library(DT)
```

## Resumo
O objetivo desse report é explorar a base de dados de compras federais e descobrir características sobre os dados que são relevantes para o Tá de pé. 

As bases de dados usadas foram disponibilizadas pelo Brasil.IO no [Google Drive](https://drive.google.com/drive/folders/1-XL0Je--FjdfeP5LE3ljd4hB5LeqMW4G).

Baixe os arquivos: `despesa_empenho.csv.gz` e `despesa_item_empenho.csv.gz` para o diretório `data` presente no mesmo diretório deste README.


```{r}
empenhos <- read_csv(here::here("reports/eda-dados-federais/data/despesa_empenho.csv.gz"))
```

### Colunas presentes
```{r}
names(empenhos)
```

Foram filtrados apenas os empenhos relacionados a Pandemia da COVID-19.

```{r}
empenhos_covid <- empenhos %>% 
  filter(codigo_acao %in% c(
    "00S4", "00S5", "00S7", "00S8", "00S9", "00SF", "00SH", "21C0", "21C1", "21C2", "00SI", "21C0"
  ))
```

### Unidades Gestoras
```{r}
empenhos_covid %>% 
  count(unidade_gestora) %>% 
  arrange(desc(n)) %>% 
  datatable(
    class = 'cell-border stripe',
    filter = 'top',
    rownames = FALSE,
    options = list(pageLength = 15,
                   dom = 'ftp')
  ) %>%
  formatStyle(columns = dplyr::everything(.), 'font-size' = "13px")
```

### Órgãos

```{r}
empenhos_covid %>% 
  count(orgao) %>% 
  arrange(desc(n)) %>% 
  datatable(
    class = 'cell-border stripe',
    filter = 'top',
    rownames = FALSE,
    options = list(pageLength = 15,
                   dom = 'ftp')
  ) %>%
  formatStyle(columns = dplyr::everything(.), 'font-size' = "13px")
```
