DROP TABLE IF EXISTS contrato;

CREATE TABLE IF NOT EXISTS "contrato" ( 
    "id_contrato" VARCHAR(32),
    "id_estado" INTEGER,
    "id_orgao" VARCHAR(32),
    "id_licitacao" VARCHAR(32),
    "codigo_contrato" VARCHAR(32),
    "nr_contrato" VARCHAR(40),
    "ano_contrato" INTEGER,
    "cd_orgao" INTEGER,
    "nm_orgao" VARCHAR(240),
    "nr_processo" VARCHAR(32),
    "ano_processo" INTEGER,
    "tp_documento_contratado" VARCHAR(10),
    "nr_documento_contratado" VARCHAR(14),
    "dt_inicio_vigencia" DATE,
    "dt_final_vigencia" DATE,
    "vl_contrato" REAL,
    "descricao_objeto_contrato" TEXT,
    "nr_licitacao" VARCHAR(20),
    "sigla_estado" VARCHAR(2),
    "tp_instrumento_contrato" VARCHAR(15),
    "contrato_possui_garantia" VARCHAR(1),
    "vigencia_original_do_contrato" INTEGER,
    "justificativa_contratacao" VARCHAR(300),
    "obs_contrato" VARCHAR(500),
    "tipo_instrumento_contrato" VARCHAR(50),
    "ano_licitacao" INTEGER,
    "cd_tipo_modalidade" VARCHAR(3),
    "tem_alteracoes" BOOLEAN,
    "language" VARCHAR(10),
    PRIMARY KEY("id_contrato"),
    CONSTRAINT contrato_key UNIQUE (id_orgao, nr_licitacao, ano_licitacao, cd_tipo_modalidade, nr_contrato, ano_contrato, tp_instrumento_contrato),
    FOREIGN KEY("id_orgao") REFERENCES orgao("id_orgao") ON DELETE CASCADE ON UPDATE CASCADE,
    FOREIGN KEY("id_licitacao") REFERENCES licitacao("id_licitacao") ON DELETE CASCADE ON UPDATE CASCADE,
    FOREIGN KEY("nr_documento_contratado") REFERENCES fornecedor("nr_documento") ON DELETE CASCADE ON UPDATE CASCADE
);
